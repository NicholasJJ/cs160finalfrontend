{% load static %}

<!DOCTYPE html>
<html>
<head>
	<title>Language</title>
	<script type="text/javascript" src="./../static/vendors/jquery/jquery-3.3.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="./../static/vendors/bootstrap/css/bootstrap.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@500;600&display=swap" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="{% static '/scripts/UploadToDataBaseExample.js' %}"></script>
	<style type="text/css">
    .icon-return {
        margin: 0 0 0 1vw;
        background: #B2B8AD;
    }

    .icon-return:hover {
        background: #91998A;
    }

    .choose-language {
      font-family: "Raleway";
      font-style: normal;
      font-weight: 500;
      font-size: 3.7vh;
      text-align: center;
      color: #1B1211;
    }

    .grid {
        position: absolute;
        top: 8vh;
        right: 0;
        bottom: 0;
        left: 0;
        display: flex;
    }

    .shelf {
        width: 30%;
        background-size: cover;
        background-image: url(./../static/images/bookshelf_left.png);
        border-style: none solid none none;
        border-width: 0.5vmin;
        border-color: #5A4442;
    }

    .ladder {
        width: 40%;
        overflow-y:auto;
    }

    #display {
        width: 30%;
        overflow-y:auto;
				overflow-x: hidden;
    }

    body {
      background-color: #EFEFEE;
    }

    .select-button {
     color: #1B1211;
     background-color: #B9B9AE;
     border: 0.2vmin solid #F2F0ED;
     box-sizing: border-box;
     box-shadow: 0px 0.5vmin 0.5vmin rgba(0, 0, 0, 0.25);
     height: 10vh;
     width: 20vw;
     text-align: center;
     font-family: "Raleway";
     font-style: normal;
     font-weight: 500;
    }

    .select-button:hover {
     background-color: #D4D4CF;
    }

    #top-box {
      background-color: #A6ACA1;
      margin: 10vh 0 0 0;
      height: 8vh;
      width: 20vw;
      font-size: 3.8vh;
      font-family: "Raleway";
      font-weight: 600;
      text-align: center;
      color: #F2F0ED;
      border: 0.2vmin solid #5A4442;
      box-sizing: border-box;
      box-shadow: 0px 0.5vmin 0.5vmin rgba(0, 0, 0, 0.25);
			overflow: auto;
    }

    #mid-box {
      background-color: #D0D6CA;
      margin: 0;
      height: 16vh;
      width: 20vw;

      font-family: "Raleway";
      font-style: normal;
      font-weight: 500;
      font-size: 4.2vh;
      text-align: center;
      color: #1B1211;

      border: 0.2vmin solid #5A4442;
      box-sizing: border-box;
			overflow: auto;
    }

    #bot-box {
      background-color: #A6ACA1;
      margin: 0 0 6vw 0;
      height: 4vh;
      width: 20vw;
      border-style: none solid solid solid;
      border-width: 0.2vmin;
      border-color: #5A4442;
      box-sizing: border-box;
    }

    .language-button {
      margin: 0;
      padding: 0;
      height: 10vh;
      width: 20vw;
      background-color: #A6ACA1;
      border: 0.2vmin solid #F2F0ED;
      box-sizing: border-box;
    }

    .language-button-clicked {
      margin: 0;
      padding: 0;
      height: 10vh;
      width: 20vw;
      background-color: #687060;
      border: 0.2vmin solid #5A4442;;
      box-sizing: border-box;
    }

    .language-button:hover {
      background-color: #838a7d;
      border: 0.2vmin solid #5A4442;
    }

    .language-button:focus {
      border: 0.5vmin solid #5A4442;
      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
    }

		/* Back icon source: Google Material Icons - https://fonts.google.com/icons?selected=Material%20Icons%20Outlined%3Aarrow_back%3A */
		#back{
			position: absolute;
			top: 50%;
			transform: translate(0.9vw,-50%);
			width: 4vh;
			height: 4vh;
	    text-align: center;
	    background-image: url("/static/images/arrow_back_black_48dp.svg");
	    background-position: center;
	    background-repeat: no-repeat;
			background-size: contain;
			opacity: 0.7;
			background-color: #b2b8ad;
			border: 1px hidden;
			text-align: center;
			border-radius: 10px;
			z-index: 1;
		}

	  #back:hover {
	    background-color: #91998A;
	    opacity: 0.7;
	    background-image: url("/static/images/arrow_back_black_48dp.svg");
	    background-position: center;
	    background-repeat: no-repeat;
			background-size: contain;
			z-index: 1;
	  }

		#back:focus {
			outline: none;
			border: 1px solid #524b47;
	  }

		#genre-text {
			margin-top: 3vh;
			font-size: 3vh;
	  }


	</style>
</head>
<body style="overflow-x: hidden;">
  <div class="container-fluid" >
    <div class="row align-items-center justify-content-center" style="height: 7.9vh; background-color: #D0D6CA; box-shadow: 0 2px 6px -1px #b2b8ad;">
      <div class = "col-2">
          <button id="back"></button>
      </div>
      <div class="col-8 choose-language">
          Choose Language
      </div>
      <div class="col-2"></div>
    </div>
    <!-- <div id="ladder" style="background-color: #E0E0E0">
    </div> -->
    <div class="grid">
      <div class="shelf"></div>

      <div id="ladder" class="ladder">

      </div>

      <div id = "display" class="py-5">
        <div class = "row align-items-center justify-content-center">
          <div id = "genre" class="select-button"><h3 id="genre-text">Choose Genre</h3></div>
        </div>
        <div class = "row align-items-center justify-content-center">
          <div class="my-5">
            <h3 id="top-box">English</h3>
            <h3 id="mid-box"><br>English</h3>
            <h3 id="bot-box"></h3>
          </div>
        </div>
        <!-- <div class = "row align-items-center justify-content-center">
          <div class="select-button">Add New Language</div>
        </div> -->
      </div>
    </div>
  </div>
</body>

<script>
	$("#back").click(function(){
			location.href = "landing";
	});

  $("#genre").click(function(){
      location.href = "genre";
  });

  const allLanguages = new Map([
    ["Other", "Other"],
    ["Arabic", "العربية"],
    ["Bengali", "বাংলা"],
    ["Chinese", "中文"],
    ["English", "English"],
    ["French", "Français"],
    ["German", "Deutsch"],
    ["Hindi", "हिन्दी"],
    ["Italian", "Italiano"],
    ["Japanese", "日本語"],
    ["Javanese", "ꦧꦱꦗꦮ"],
    ["Korean", "한국어"],
    ["Marathi", "मराठी"],
    ["Portuguese", "Português"],
    ["Punjabi", "ਪੰਜਾਬੀ"],
    ["Russian", "Русский язык"],
    ["Spanish", "Español"],
    ["Tamil", "தமிழ்"],
    ["Telugu", "తెలుగు"],
    ["Turkish", "Türkçe"],
    ["Urdu", "اُردُو"],
    ["Vietnamese", "tiếng Việt"],
  ]);

  window.onload = function(event) {
    getLanguage(cb);

  }
  function cb(response) {
    console.log(response.list_of_language);
    response.list_of_language.forEach(function(value,index){allLanguages.set(value,value)});

    addLanguage();
    updateLanguage("English", "English");
  }

  function addLanguage() {
    var count = 0;
    var ladder = document.getElementById("ladder");
    console.log(allLanguages);
    allLanguages.forEach(function(value, key){
      var link = document.createElement("a");

      var languageButton = document.createElement("div");
      languageButton.setAttribute("class", "language-button");
      languageButton.setAttribute("id", key.toString());
      languageButton.setAttribute("style", "transform: translate(" + 3.6 * count + "vw); overflow: auto");
      languageButton.setAttribute("onclick", "updateLanguage('"+key.toString()+"', '"+value.toString()+"'); updateBackground('"+key.toString()+"')");

      var languageText = document.createElement("div");
      languageText.setAttribute("class", "language-text");
      languageText.setAttribute("style", "font-size: 3.8vh; color: #F2F0ED; text-align: center; font-family: 'Raleway'; font-weight: 500;");

      console.log(value);
      console.log(languageText);

      languageText.innerText = value
      languageButton.appendChild(languageText);
      link.appendChild(languageButton)
      ladder.appendChild(link);

      if (count == 5) {
        count = 0;
      } else {
        count = count + 1;
      }
    });
  }

  function updateLanguage(key, value) {
    console.log("hi");
    var top = document.getElementById("top-box");
    var mid = document.getElementById("mid-box");
    top.innerHTML = key;
    mid.innerHTML = "<br>" + value;
    sessionStorage.setItem("language",key);
  }

  var buttonPrevious;

  function updateBackground(languageButtonID) {
    console.log("color change");
    if (languageButtonID != buttonPrevious && buttonPrevious != null) {
      var removeColor = document.getElementById(buttonPrevious);
      removeColor.setAttribute("class", "language-button");
    }
    var languageBtn = document.getElementById(languageButtonID);
    languageBtn.setAttribute("class", "language-button-clicked");
    buttonPrevious = languageButtonID;

    var top = document.getElementById("top-box");
    top.setAttribute("style", "background-color: #687060");
  }
</script>
</html>
